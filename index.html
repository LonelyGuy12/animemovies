<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Falling Petals</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #f0f8ff;
    }
    .petal {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: pink;
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(255, 192, 203, 0.8);
      opacity: 1;
      transition: opacity 0.5s ease-in;
    }
  </style>
</head>
<body>

<script>
  // Petal collection
  const petals = [];

  // Petal class
  class Petal {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.vy = Math.random() * 2 + 1; // Random falling speed
      this.lifetime = Math.random() * 4000 + 3000; // Lifespan in milliseconds
      this.element = document.createElement('div');
      this.element.className = 'petal';
      document.body.appendChild(this.element);
      this.updatePosition();
      this.scheduleRemoval(); // Schedule the petal to disappear
    }

    updatePosition() {
      this.element.style.left = `${this.x}px`;
      this.element.style.top = `${this.y}px`;
    }

    update() {
      // Move the petal downward
      this.y += this.vy;

      // Update DOM position
      this.updatePosition();
    }

    scheduleRemoval() {
      // Fade out and remove the petal after its lifetime
      setTimeout(() => {
        this.element.style.opacity = '0';
        setTimeout(() => {
          this.element.remove();
        }, 500); // Delay for fade-out transition
      }, this.lifetime);
    }
  }

  // Create multiple petals
  function createPetals(count) {
    for (let i = 0; i < count; i++) {
      const x = Math.random() * window.innerWidth;
      const y = -20; // Start above the viewport
      petals.push(new Petal(x, y));
    }
  }

  // Animation loop
  function animate() {
    petals.forEach((petal, index) => {
      petal.update();

      // Remove petals that have left the viewport
      if (petal.y > window.innerHeight) {
        petals.splice(index, 1); // Remove from array
      }
    });
    requestAnimationFrame(animate);
  }

  // Continuous petal creation
  function startPetalCreation() {
    createPetals(5); // Adjust the number of petals per batch
    setTimeout(startPetalCreation, Math.random() * 1000 + 500);
  }

  // Initialize
  createPetals(30); // Initial petals
  animate(); // Start animation
  startPetalCreation(); // Continuously create petals
</script>

</body>
</html>
